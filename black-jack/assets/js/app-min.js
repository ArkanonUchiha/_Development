const myModule=(()=>{"use strict";let e=document.querySelector("#newMatch"),t=document.querySelector("#askCard"),a=document.querySelector("#stopMatch"),r=document.querySelectorAll("small"),l=document.querySelectorAll(".cards-container"),s=[],o=[],d=["C","D","H","S"],n=["A","J","Q","K"],c={newMatchQS:e,askCardQS:t,stopMatchQS:a,playersSmallQS:r,cardsContainerQS:l},i=(e=2)=>{s=S(),o=[];for(let t=0;t<e;t++)o.push(0);c.playersSmallQS.forEach(e=>e.textContent=""),c.cardsContainerQS.forEach(e=>{for(;e.firstChild;)e.removeChild(e.firstChild)}),c.askCardQS.disabled=!1,console.log("playersPoints - init",o)},S=()=>{s=[];for(let e=2;e<=10;e++)for(let t of d)s.push(e+t);for(let a of d)for(let r of n)s.push(r+a);return _.shuffle(s)},h=()=>{if(!s.length)throw"No hay cartas en el deck";return s.pop()},p=e=>{let t=e.substring(0,e.length-1);return isNaN(t)?"A"===t?11:10:Number(t)},u=(e,t)=>{let a=document.createElement("img");a.src=`assets/cartas/${e}.png`,a.classList.add("cards"),c.cardsContainerQS[t].appendChild(a)},$=()=>{c.stopMatchQS.disabled=!1;let e=h(),t=C(e,0);u(e,0),t>21?(c.askCardQS.disabled=!0,c.stopMatchQS.disabled=!0,Q(t)):21===t&&(c.askCardQS.disabled=!0,c.stopMatchQS.disabled=!0,Q(t))},f=()=>{console.log("playersPoints - comparePoints",o);let[e,t]=o;setTimeout(()=>{t===e?alert("DRAW GAME"):e>21?alert("IA WIN, YOU LOSE"):t>21?alert("YOU WIN, IA LOSE"):alert("IA WIN, YOU LOSE")},500)},C=(e,t)=>(console.log("playersPoints - accumulatePoints",o),o[t]=o[t]+p(e),c.playersSmallQS[t].textContent=o[t],o[t]),Q=e=>{let t=0;do{let a=h(),r=o.length-1;t=C(a,r),u(a,r)}while(t<e&&e<=21);f(),console.log("playersPoints - addIaPoints",o)},y=()=>{i()},g=e=>{c.askCardQS.disabled=!0,e.target.disabled=!0};return c.newMatchQS.addEventListener("click",()=>{y()}),c.askCardQS.addEventListener("click",()=>{$()}),c.stopMatchQS.addEventListener("click",e=>{g(e),Q(o[0])}),{app:c,crearDeck:S,init:i,puntosJugadores:o}})();
